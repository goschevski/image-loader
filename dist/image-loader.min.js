/*! Image Loader - v0.1.0 - 2012-10-02
* https://github.com/salencebg/image-loader
* Copyright (c) 2012 Ivan Tatic & Aleksandar Gosevski; Licensed MIT, GPL */
(function(a){function c(c,d){if(!this.isSupported)throw"Older browesers are not supported.";this.$element=a(c);var e=this.options=a.extend({},a.fn.imageLoader.defaults,d);this.$placeholder=a(e.show),this.$element.on("change."+b,a.proxy(this._onChange,this))}var b="imageloader";c.prototype={$:function(a){return this.$element.find(a)},_onChange:function(a){this._reader(a.currentTarget)},_reader:function(b){var c=new FileReader,d=this,e=this.options;c.onload=function(b){return a.proxy(d[e.cssBackground?"_setBackground":"_setImage"],d)}(b.files[0]),c.readAsDataURL(b.files[0]),a.isFunction(e.callback)&&e.callback()},_setImage:function(a){var b=this.options;return this.$placeholder.append('<img src="'+a.target.result+'" width="'+b.width+'" height="'+b.height+'" class="'+b.imgClass+'" />')},_setBackground:function(a){return this.$placeholder.css({backgroundImage:"url("+a.target.result+")"})},isSupported:function(){return window.File&&window.FileReader&&window.FileList&&window.Blob}()},a.fn.imageLoader=function(d){return this.each(function(){var e=a(this),f=e.data(b),g=typeof d=="object"&&d;f||e.data(b,f=new c(this,g)),typeof d=="string"&&d.charAt(0)!=="_"&&f[d]()})},a.fn.imageLoader.Constructor=c,a.fn.imageLoader.defaults={show:".show",width:"auto",height:"auto",imgClass:"img-load",cssBackground:!1,callback:null}})(jQuery);